<!--<div class="function-container">
  <div class="function-content">
    <div class="function-content-content">

    </div>
  </div>

  <div class="function-menu">
    <div mat-subheader class="function-menu-title">Evaluation</div>
    <mat-list>
      <mat-list-item>
        <button matListItemTitle class="list-button" mat-button>
          Criteria
        </button>
      </mat-list-item>

      <mat-list-item>
        <button matListItemTitle class="list-button" mat-button>
          keywords
        </button>
      </mat-list-item>

      <mat-list-item>
        <button matListItemTitle class="list-button" mat-button>
          Scoring
        </button>
      </mat-list-item>

    </mat-list>
  </div>
</div>-->

<div class="spinner" *ngIf="isLoading && !errorMessage">
  <mat-spinner></mat-spinner>
</div>
<ng-container *ngIf="errorMessage.length">
  <span class="alert alert-danger fs-5 text-wrap">{{ errorMessage }}</span>
</ng-container>
<ng-container *ngIf="!isLoading && dataSource && dataSource.data && dataSource.data.length === 0 && !errorMessage">
  <span class="alert alert-danger fs-5 text-wrap">No data available</span>
</ng-container>
<!--*ngIf="!isLoading && dataSource && dataSource.data && dataSource.data.length > 0 && !errorMessage"-->
<div>
  <div class="container-fluid row d-flex align-items-center justify-content-between flex-wrap">
    <div class="col-12 col-md-6 col-lg-4 mb-2 mb-md-0">
      <mat-form-field class="w-100 m-1 filter-field" appearance="outline">
        <mat-label>Filter</mat-label>
        <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Dev Ops" #input>
      </mat-form-field>
    </div>

    <div class="d-flex col-12 col-md-6 col-lg-4 mb-2 mb-md-0 d-flex justify-content-end">
      <button mat-button (click)="addProfile()">
        <mat-icon>add_circle</mat-icon>
      </button>
    </div>
  </div>

  <div class="main-list-container container-fluid d-flex mt-3">
    <div class="list-container col-4">
      <mat-list class="scrollable-list">
        <mat-list-item *ngFor="let row of dataSource.filteredData" class="select-profile"
                       [ngClass]="{'selected-profile': selectedProfile?.id === row.id}">
          <div class="w-100 d-flex justify-content-between align-items-center">
            <div class="col-8">{{ row.name }}</div>
            <div class="col-4 d-flex justify-content-between p-1">
              <button mat-icon-button class="button-criteria">
                <mat-icon>more_vert</mat-icon>
              </button>
              <button mat-raised-button (click)="loadCriteria(row)" class="button-criteria selectedButton">
                <mat-icon>keyboard_tab</mat-icon>
              </button>
            </div>

          </div>
        </mat-list-item>
        <div *ngIf="dataSource.filteredData.length === 0" class="no-data-message">
          No data matching the filter "{{ input.value }}"
        </div>
      </mat-list>
    </div>


    <div *ngIf="selectedProfile" class="col-7">
      <ng-container *ngIf="selectedProfile?.listCriteria; else message">
        <div class="alert-danger" *ngIf="criteriaErrorMessage">{{ criteriaErrorMessage }}</div>
        <div class="form-container second-container p-2 align-items-center">
          <mat-form-field appearance="outline" class="input-field">
            <mat-label>Add a new Criteria</mat-label>
            <input matInput type="text" placeholder="Enter new criteria" [(ngModel)]="newCriteria"
                   (keydown.enter)="addCriteriaClick()">
          </mat-form-field>
          <button mat-button [disabled]="!newCriteria" (click)="addCriteriaClick()">
            <mat-icon>add_circle</mat-icon>
          </button>
        </div>
        <div class="scrollable-list">

          <!--<mat-list class="mt-4">
            <mat-list-item *ngFor="let criteria of selectedProfile?.listCriteria" class="criteria-element">
              <div class="d-flex justify-content-between align-items-center">
                <div>{{ criteria.description }}</div>
                <div>
                  {{ criteria.createdAt | date: 'yyyy-MM-dd' }}
                </div>
                <div>
                  <button mat-icon-button aria-label="Example icon-button with a menu">
                    <mat-icon>more_vert</mat-icon>
                  </button>
                </div>
              </div>
            </mat-list-item>
            <div *ngIf="dataSource.filteredData.length === 0" class="no-data-message">
              No data matching the filter "{{ input.value }}"
            </div>
          </mat-list>-->
          <table class="table w-100 table-striped mt-4">
            <thead>
            <tr>
              <th>Description</th>
              <th>Date</th>
              <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let criteria of selectedProfile?.listCriteria" class="criteria-element">
              <td class="align-content-center flex-wrap text-break">{{ criteria.description }}</td>
              <td class="align-content-center text-nowrap">{{ criteria.createdAt | date: 'yyyy-MM-dd' }}</td>
              <td class="align-content-center justify-content-end">
                <button mat-button (click)="deleteCriteria(criteria.id)">
                  <mat-icon style="color: red">delete_forever</mat-icon>
                </button>
              </td>
            </tr>
            </tbody>
          </table>

          <!-- Message si aucune donnÃ©e ne correspond au filtre -->
          <div *ngIf="dataSource.filteredData.length === 0" class="no-data-message">
            No data matching the filter "{{ input.value }}"
          </div>


        </div>


      </ng-container>
      <ng-template #message>
        <div>{{ criteriaErrorMessage }}</div>
      </ng-template>
    </div>
  </div>


</div>





